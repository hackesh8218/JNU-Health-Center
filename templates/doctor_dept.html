<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JNU Health Center - {{ department.name }} Specialists</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Custom Styles for Modern Aesthetic */
        body { font-family: 'Inter', sans-serif; background-color: #eef2ff; }
        
        /* Themed Header */
        .header-bg {
            background-image: linear-gradient(to right, #10b981, #3b82f6); /* Green-Blue Gradient */
            height: 120px;
            display: flex;
            align-items: center;
            padding: 0 24px;
        }
        
        /* Stylish Buttons - VIBRANT AND RESPONSIVE STYLING */
        .btn-back {
            /* Back button: Enhanced color transition and scale effect */
            @apply bg-transparent text-white font-semibold px-4 py-2 rounded-full border-2 border-white 
            hover:bg-green-100 hover:text-green-700 transition-all duration-300 shadow-xl flex items-center space-x-2
            focus:outline-none focus:ring-4 focus:ring-white focus:ring-opacity-70 transform hover:scale-105;
        }
                .header-bg {
            background-image: linear-gradient(to right, #4CAF50, #2196F3);
            background-size: cover;
            background-position: center;
            height: 120px;
            display: flex;
            align-items: center;
            padding: 0 24px;
        }
        .header-logo {
            height: 80px;
            width: 80px;
            margin-right: 20px;
            border-radius: 50%; 
            object-fit: cover;
        }
        .header-text h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.25rem;
        }
        .header-text p {
            font-size: 1.1rem;
            color: #e0e0e0;
            font-weight: 500;
        }
        .btn-book {
            /* Primary action (Book): Deep blue with intense shadow and scale */
            @apply bg-blue-600 text-white font-bold px-5 py-2 text-sm rounded-lg shadow-2xl shadow-blue-400/50
            hover:bg-blue-700 transform hover:scale-110 transition-all duration-300 ease-in-out
            focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-70;
        }
        .btn-view {
            /* Secondary action (View Profile): Vibrant Orange for contrast, subtle shadow */
            @apply bg-orange-500 text-white font-semibold px-4 py-2 text-sm rounded-lg shadow-xl shadow-orange-300/50 border border-orange-600
            hover:bg-orange-600 transform hover:scale-105 transition-all duration-300
            focus:outline-none focus:ring-4 focus:ring-orange-400 focus:ring-opacity-70;
        }

        /* Doctor Card Animation */
        .doctor-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); /* Slightly deeper shadow */
        }
        
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- 1. JNU Header (Consistent Branding) -->
    <header class="header-bg shadow-md">
        <div class="container mx-auto flex items-center">
            <img src="/static/uploads/JNUlogo.jpeg" alt="JNU Logo" class="header-logo rounded-full" />
            <div class="header-text">
                <h1>JNU Health Centre</h1>
                <p>Online Specialist Consultations & Part Time Psychology Services</p>
            </div>
        </div>
    </header>
    
    <!-- 2. Main Navigation Header -->
    <header class="bg-white shadow-lg sticky top-0 z-20">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <h1 class="text-3xl font-extrabold text-blue-800">
                    Department of <span class="text-green-600">{{ department.name }}</span>
                </h1>
              </div>

              <!-- Back button -->
            <!-- Back Button -->
            <a href="{% if role == 'doctor' %}
                        {{ url_for('doctor_dash') }}
                    {% elif role == 'patient' %}
                        {{ url_for('patient_dash') }}
                    {% elif role == 'admin' %}
                        {{ url_for('admin_dash') }}
                    {% endif %}"
              class="inline-flex items-center bg-gray-200 text-gray-700 font-medium px-5 py-2 rounded-lg shadow-md
                      transform transition duration-300 ease-in-out
                      hover:bg-gray-300 hover:text-gray-900 hover:scale-105 hover:shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                <span>Go Back</span>
            </a>
        </div>
    </header>

    <!-- 3. Main Content -->
    <main class="flex-grow container mx-auto px-6 py-10">

        <!-- Department Overview Card (Enhanced Design) -->
        <div class="bg-white p-8 rounded-2xl shadow-2xl mb-12 border-l-8 border-green-500 transform hover:shadow-3xl transition duration-300">

            <h2 class="text-3xl font-extrabold text-blue-800 mb-4">Department Overview</h2>

            <div class="grid md:grid-cols-3 gap-8 items-center">
                
                <!-- Description -->
                <div class="md:col-span-2">
                    <!-- Auto-generated content Placeholder -->
                    <p class="text-gray-700 leading-relaxed mb-4 italic">
                        The Department of {{ department.name }} is dedicated to providing comprehensive and compassionate care. Our team of specialists uses the latest diagnostic tools and treatment protocols to ensure the best outcomes for our patients. We focus on evidence-based medicine and patient education.
                    </p>
                    
                    <!-- Enhanced OPD Timing Section -->
                    <div class="p-4 bg-green-50 rounded-lg border border-green-200 mt-6">
                        <h4 class="text-xl font-bold text-green-700 mb-2 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            Official OPD Timings
                        </h4>
                        <!-- UPDATED: Hardcoded timing as requested -->
                        <p class="text-lg text-gray-700 font-medium ml-8">
                            9:00 AM - 12:00 PM and 2:00 PM - 6:00 PM
                        </p>
                    </div>
                </div>

                <!-- Initial Badge -->
                <div class="md:col-span-1 flex justify-center">
                    <div class="w-32 h-32 rounded-full shadow-xl flex items-center justify-center 
                                 bg-gradient-to-tr from-green-300 to-blue-400 border-4 border-white ring-4 ring-green-600">
                        <span class="text-5xl font-extrabold text-white">
                            {{ department.name[0] }}
                        </span>
                    </div>
                </div>

            </div>
        </div>

        <!-- Doctors Section -->
        <h3 class="text-3xl font-bold text-blue-800 mb-8 border-b-4 border-orange-500 pb-2">
            Meet Our Top Specialists ({{ department.name }})
        </h3>

        <div class="space-y-6">

            {% for doc in doctors %}
            <div class="bg-white p-6 rounded-2xl shadow-xl flex flex-col md:flex-row doctor-card 
                        items-center transition duration-300">

                <div class="md:w-3/5 flex items-start space-x-6 w-full">

                    <!-- Doctor Profile Initial -->
                    <div class="flex-shrink-0 h-24 w-24 rounded-full flex items-center justify-center
                                 bg-gradient-to-br from-blue-300 to-blue-600
                                 border-4 border-white ring-2 ring-blue-500 shadow-lg">
                        <span class="text-3xl font-extrabold text-white">
                            Dr. {{ doc.name[0] }}
                        </span>
                    </div>

                    <div class="flex-grow pt-1">
                        <h4 class="text-2xl font-bold text-gray-900">
                            Dr. {{ doc.name }}
                        </h4>
                        <p class="text-lg text-green-600 font-semibold mb-2">
                            {{ doc.specialization }}
                        </p>

                        <div class="flex items-center text-sm text-gray-600 space-x-4">
                            <span>
                                <strong class="text-blue-700">{{ doc.experience }}</strong> Yrs Experience 
                            </span>
                            <span>|</span>
                            <span>
                                <strong class="text-blue-700">{{ doc.qualifications }}</strong>
                            </span>
                        </div>
                        
                        <!-- Rating Display -->
                        <div class="flex items-center mt-2">
                            <span class="text-lg text-yellow-500">
                                <!-- FIX: Use default(0) to handle null or missing ratings safely -->
                                {% set rounded_rating = (doc.rating | default(0) | round | int) %}
                                {% for i in range(rounded_rating) %}‚òÖ{% endfor %}
                                {% for i in range(5 - rounded_rating) %}‚òÜ{% endfor %}
                            </span>
                            <span class="text-sm text-gray-600 ml-2">({{ doc.rating | default("N/A") }}/5)</span>
                        </div>
                    </div>
                </div>

                <!-- Buttons -->
                <div class="md:w-2/5 mt-6 md:mt-0 flex flex-col md:flex-row 
                        md:justify-end items-center space-y-3 md:space-y-0 md:space-x-4 w-full">

                <!-- Check Availability -->
                <a href="{{ url_for('doctor_avail', doctor_id=doc.doctor_id) }}"
                  class="w-full md:w-auto text-center bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md 
                          transform transition duration-300 ease-in-out hover:bg-blue-700 hover:scale-105 hover:shadow-lg">
                    <span class="mr-2">üóìÔ∏è</span>Check Availability
                </a>

                <!-- Book Appointment -->
                <a href="{{ url_for('new_appointment', doctor_id=doc.doctor_id) }}"
                  class="w-full md:w-auto text-center bg-green-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md 
                          transform transition duration-300 ease-in-out hover:bg-green-700 hover:scale-105 hover:shadow-lg">
                    <span class="mr-2">‚úÖ</span>Book Appointment
                </a>

                <!-- View Full Profile -->
                <a href="{{ url_for('doctor_profile', doctor_id=doc.doctor_id) }}"
                  class="w-full md:w-auto text-center bg-purple-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md 
                          transform transition duration-300 ease-in-out hover:bg-purple-700 hover:scale-105 hover:shadow-lg">
                    üë§ View Full Profile
                </a>
            </div>

            </div>
            {% endfor %}

            {% if doctors|length == 0 %}
            <div class="bg-white p-8 rounded-xl shadow-lg mt-10">
                <p class="text-gray-600 text-center text-xl py-8">
                    üòî No specialists are currently listed in the Department of {{ department.name }}.
                </p>
            </div>
            {% endif %}

        </div>

    </main>

    <!-- 4. Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-12">
        <div class="container mx-auto px-6 text-center text-sm text-gray-400">
            &copy; 2025 JNU Health Center. All rights reserved.
        </div>
    </footer>

</body>
</html>